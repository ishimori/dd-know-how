# 機能開発フロー（5ステップ）

新機能の実装は、以下のフローに従います。**いきなりコードを書かない。**

```
┌─────────────────────────────────────────────────────────────┐
│  Step 1: DD作成          「〇〇機能を作りたい」              │
│  Step 2: 仕様確認        認識合わせ                          │
│  Step 3: 実装            コーディング + テスト                │
│  Step 4: 検証            動作確認 + レビュー                  │
│  Step 5: 完了            コミット → /dd archive              │
└─────────────────────────────────────────────────────────────┘
```

---

## Step 1: DD作成

**目的**: 何を作るかを明確にし、意思決定を記録する

```
/dd new 機能名
```

DDに以下を記載する：
- **目的**: 何を作るか（機能概要）
- **背景・課題**: なぜ必要か
- **タスク一覧**: 実行するタスク

---

## Step 2: 仕様確認

**目的**: 認識齟齬を防ぐため、仕様を確認する

以下を説明し、ユーザーの「OK」を得てから次へ進む：
- 何を作るか（機能概要）
- どう作るか（技術的アプローチ）
- 影響範囲（既存コードへの影響）

---

## Step 3: 実装

**目的**: コードを書く

- コーディング規約に従って実装
- 必要に応じてテストも作成

---

## Step 4: 検証

**目的**: 動作確認と品質チェック

- 動作確認（実際に動かしてみる）
- コードレビュー（セルフチェック）
- 必要に応じてLint/Formatを実行

---

## Step 5: 完了

**目的**: 変更を記録し、DDを完了状態にする

### コミット
```bash
git add . && git commit -m "機能名: 概要"
```

### DDアーカイブ
```
/dd archive DD-XXX
```

DDは `doc/archived/DD/` に移動される。

---

## フロー例外（DDを省略できるケース）

以下の場合はDDを省略可能：
- 単純なバグ修正（原因が明確）
- ドキュメントの誤字修正
- 既存DDのタスク消化

---

## クイックリファレンス

| ステップ | コマンド/アクション |
|----------|---------------------|
| DD作成 | `/dd new タイトル` |
| DD参照 | `/dd {番号}` |
| DD一覧 | `/dd list` |
| DDアーカイブ | `/dd archive {番号}` |
| コミット | `git commit` |

---

## 進捗表示（オプション）

各ステップ開始時に、以下のフォーマットで進捗を表示すると見やすい：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📍 Step N/5: ステップ名
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 1. DD作成       ✅ 2. 仕様確認     ▶️ 3. 実装
⬜ 4. 検証         ⬜ 5. 完了
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

| 記号 | 意味 |
|------|------|
| ✅ | 完了済み |
| ▶️ | 現在実行中 |
| ⬜ | 未実行 |
