# DD設計書操作コマンド

DD（Design Document）設計書を操作するコマンドです。

## 引数の解釈

### DD番号の指定（柔軟に解釈する）
以下はすべて同じDD-001を指す：
- `DD-001` / `DD 001` / `DD001` / `001` / `1`

→ 番号部分（数字）を抽出して3桁にゼロパディング（1 → 001）

### コマンド
- `{番号}` → 該当DDを参照
- `new タイトル` → 新規DD作成
- `list` → 進行中DD一覧
- `archive {番号}` → DDをアーカイブ
- `update {番号}` → DDを更新（ログ追記含む）

## 操作手順

### 参照（DD-001, 001 など）
1. `doc/DD/DD-{番号}_*.md` を検索（メインファイルは常に直下）
2. なければ `doc/archived/DD/DD-{番号}_*.md` を検索
3. ファイルを読み込み、内容を要約して表示
4. 添付フォルダ `doc/DD/DD-{番号}/` があれば、その存在も通知
5. 「何をしますか？」と確認

### 新規作成（new タイトル）
1. **既存DD番号の確認（重要）**
   - `doc/DD/DD-*.md` を検索
   - `doc/archived/DD/DD-*.md` も検索（アーカイブ済みも含める）
   - 両方から最大番号を取得
2. 次の連番で `DD-{連番}_{タイトル}.md` を作成
3. テンプレートファイルをコピー: `doc/templates/dd_template.md` を読み込み、`{番号}` `{タイトル}` `{日付}` を置換

**注意**: 番号重複を防ぐため、必ずアーカイブ済みDDも含めて最大番号を確認すること

### 一覧（list）
1. `doc/DD/` 内のDD一覧を表示
2. 各DDのタイトルとステータスを表示

### アーカイブ（archive DD-001）
1. 該当DDの全タスクが完了しているか確認
2. `doc/DD/` から `doc/archived/DD/` に移動
   - メインファイル `DD-{番号}_*.md` を移動
   - 添付フォルダ `DD-{番号}/` がある場合は**フォルダごと移動**

## DDテンプレート

テンプレートファイル: `doc/templates/dd_template.md`

新規DD作成時は、このファイルを読み込んで以下を置換する：
- `{番号}` → 3桁ゼロパディングの連番（例: 001）
- `{タイトル}` → ユーザー指定のタイトル
- `{日付}` → 作成日（YYYY-MM-DD形式）

### ステータスの種類
- **進行中** - 作業中のDD
- **完了** - 全タスク完了、アーカイブ待ち

## 注意事項

- DDを更新した場合は、必ず「ログ」セクションに記録を追加する
- タスク完了時は `[x]` に変更し、ログにも記録する
