# DD-{番号}: {タイトル}

| 作成日 | 更新日 | ステータス |
|--------|--------|------------|
| {日付} | {日付} | 進行中 |

## 目的

（このDDで何を決定・実現するか）

## 背景・課題

（なぜこのDDが必要か、現状の問題点）

## 検討内容

（選択肢の比較、調査結果、トレードオフの検討）

## 決定事項

（最終的に何を決めたか、採用した方針）

## タスク一覧

### Phase 0: 事前精査
- [ ] 📋 **各Phaseのタスク精査・詳細化**
- [ ] 😈 **Devil's Advocate調査**
  - このアプローチの欠点・リスクは何か？
  - 他に有力な選択肢はないか？
  - 将来壊れやすくなるポイントはないか？

### Phase 1: 〇〇
- [ ] タスク1
- [ ] タスク2
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

### Phase 2: 〇〇
- [ ] タスク3
- [ ] タスク4
- [ ] 😈 **DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）**

<!-- 各Phaseの最後に「😈 DA批判レビュー（「このPhaseで何が壊れるか」を最低1件発見）」を必ず追加 -->

## ログ

### {日付}
- DD作成

---

## DA批判レビュー記録

<!--
⚠️ 重要: Devil's Advocate（悪魔の代弁者）視点で批判的にレビューする

### DA批判レビューの姿勢（必読）
- ❌「うまくいく前提で確認する」→ ⭕「どこが壊れるか探す」
- ❌「問題なさそう」で終わり → ⭕「暗黙の前提が崩れるケースは？」と深掘り
- ❌「コードが動いたからOK」→ ⭕「半年後の変更で壊れないか？」と問う

### DA批判レビューで問うべき観点
1. 矛盾・不整合はないか
2. 暗黙の前提条件が崩れるケースはないか
3. エッジケース・境界条件の漏れはないか
4. 「正常系しか考えていない」箇所はないか
5. 依存関係の見落としはないか
6. 将来の変更で壊れやすい設計はないか

### 最低発見数ルール
- 小（1-2ファイル）: 1件以上
- 中（3-5ファイル）: 2件以上
- 大（6ファイル以上）: 3件以上

### 🔄 再チェック発動条件（どちらかを満たせば発動）

**条件A: 中レベル以上の発見がある場合**
- 重要度「中」または「高」が1件以上 → 🔄 別角度で再チェック必須
- 理由: 中レベル以上 ＝ 設計判断の甘さを示唆 → 同種の問題がまだある可能性が高い

**条件B: 多数発見の場合（従来ルール）**
- 小で3件以上 / 中で5件以上 / 大で7件以上 → 🔄 別角度で再チェック必須
- 理由: 見落としが多い ＝ まだ他にもある可能性が高い

### Phase N DA批判レビュー

**DA観点:** （このPhaseで最も壊れやすいポイントは何か？）

| # | 発見した問題/改善点 | 重要度 | DA観点 | 対応 |
|---|-------------------|--------|--------|------|
| 1 | (具体的に記述) | 高/中/低 | (どのDA観点で発見したか) | ✅修正済/⏭️別DD/❌不要 |
| 2 | ... | ... | ... | ... |

※ 発見ゼロは疑わしい。以下を実施してから再チェック:
1. 変更ファイルを全行読み直す
2. 変更した関数名でgrepして呼び出し元を確認
3. 新規追加した関数のテストがあるか確認

### Phase N DA批判レビュー（2回目: 別角度）← 中以上発見 or 多数発見時

**発動理由:** 1回目で重要度「中」以上をX件発見 / 合計X件発見
**切り替えた視点:** （例: 実装者→レビュアー / 機能→テスト / 現在→将来の保守性）

**追加発見:**
| # | 発見した問題 | 視点 | 対応 |
|---|------------|------|------|
| X+1 | ... | レビュアー/ユーザー/将来の保守者 視点 | ... |
-->
